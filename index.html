<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tour The Lakes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="images/TTLFAVIcon.png">

    <style>
        html, body {
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
            margin: 0;
            padding: 0;
            height: 100%;
            background-color: #2b2b2b;
        }

.site-header {
  width: 100%;
}

.header-inner {
  height: 64px;
  display: flex;
  align-items: center;
  padding: 0 16px;
}

.brand {
  color: rgba(255,255,255,0.92);
  font: 600 16px/1 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  letter-spacing: 0.2px;
}

img {
  width: 100%;
  display: block;
}

.hero-wrapper {
  position: relative;
  border-top: 2px solid #b86b2a;
  border-bottom: 2px solid #b86b2a;
}

.hero-wrapper::after {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.55);
  pointer-events: none;
  z-index: 1;
}

.hero-wrapper h1 {
  font-weight: 600;
  position: absolute;
  left: 0;
  width: 100%;
  text-align: center;
  margin: 0;
  color: #b86b2a;
  z-index: 2;
}

.hero-wrapper p {
  position: absolute;
  left: 0;
  width: 100%;
  text-align: center;
  margin: 0;
  color: rgba(255,255,255,0.92);
  z-index: 2;
}

.hero-wrapper h1 { top: 35%; }
.hero-wrapper p  { top: 52%; }
.hero-wrapper h1 { font-size: 58px; }
.hero-wrapper p  { font-size: 28px; }

.hero-gap {
    height: 64px;
    width: 100%;
}

.tour-image img {
    max-height: 200px;
    object-fit: cover;
    position: relative;
    z-index: 0;
}

.tour-image::after {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.55);
  pointer-events: none;
  z-index: 1;
  border-top: 2px solid #b86b2a;
  border-bottom: 2px solid #b86b2a;
}

.tour-image {
  position: relative;
}

.tour-image .tour-title {
  position: absolute;
  left: 0;
  width: 100%;
  top: 18%;
  text-align: center;
  margin: 0;
  color: #b86b2a;
  z-index: 2;
  font: 600 58px/1.1 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

.tour-divider {
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 40px 0 20px 0;
}

.tour-divider-line {
  flex: 1;
  height: 1px;
  background: #b86b2a;
}

.tour-toggle {
  background: #2b2b2b;
  border: 1px solid #b86b2a;
  border-radius: 50%;
  padding: 8px;
  margin: 0 12px;
  cursor: pointer;
}

.tour-toggle img {
  display: block;
  width: 20px;
  height: 20px;
  border-bottom: none;
}

.tour-details {
  max-width: 900px;
  margin: 0 auto;
  padding: 20px 20px 40px 20px;

  font-weight: 600;
  color: rgba(255,255,255,0.92);
}

.tour-description {
    white-space: pre-wrap;
}

.site-footer {
  width: 100%;
  border-top: 2px solid #b86b2a;
}

.footer-inner {
  height: 64px;
  display: flex;
  align-items: center;
  padding: 0 16px;
}

.footer-text {
  color: rgba(255,255,255,0.6);
  font: 400 14px/1 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  letter-spacing: 0.2px;
}

@media screen and (min-width: 1024px) {
  .hero-wrapper img {
    max-height: 600px;
    object-fit: cover;
  }

.hero-wrapper h1 { top: 35%; }
.hero-wrapper p { top: 48%; }

.tour-image img {
    max-height: 300px;
    object-fit: cover;
}

}

@media screen and (max-width: 600px) {

  .hero-wrapper h1 {
    top: 32%;
    font-size: 36px;
  }

  .hero-wrapper p {
    top: 50%;
    font-size: 18px;
  }

  .tour-image .tour-title {
      font-size: 36px;
  }

}
        
    </style>
</head>
 <body>

    <header class="site-header">
  <div class="header-inner">
    <div class="brand">Tour The Lakes</div>
  </div>
</header>

<div class="hero-wrapper">
  <img src="images/DSC_0092.JPG.jpg" alt="Tour The Lakes Image" class="hero-image">

  <h1>Discover the Lakes</h1>
   <p>Sightseeing with a difference</p>
    
</div>

     <div class="hero-gap"></div>

<section id="tours"></section>

<template id="tourTemplate">
  <article class="tour" data-tour-id="">
   <div class="tour-image">
    <div class="tour-title"></div>
     </div>

      <div class="tour-row">
       <div class="tour-meta">
        <span class="tour-price"></span>
         <span class="tour-nextdate"></span>
          <span class="tour-seats"></span>
          </div>
           </div>

    <div class="tour-divider">
      <div class="tour-divider-line"></div>
      <button class="tour-toggle" type="button" aria-expanded="false">
        <img src="images/TTLFAVIcon.png" alt="Expand tour">
      </button>
      <div class="tour-divider-line"></div>
    </div>

    <div class="tour-details" hidden>
      <div class="tour-description"></div>
      <div class="tour-itinerary"></div>

      <div class="tour-booking-area">
        <div class="tour-calendar"></div>
        <div class="tour-workspace"></div>
      </div>
    </div>
  </article>
</template>


<footer class="site-footer">
  <div class="footer-inner">
    <div class="footer-text">Â© Tour The Lakes</div>
  </div>
</footer>


<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyA9EdglxWetAv81qe1GnwlMf7HbPccjXxQ",
    authDomain: "tourthelakes-1e165.firebaseapp.com",
    databaseURL: "https://tourthelakes-1e165-default-rtdb.firebaseio.com",
    projectId: "tourthelakes-1e165",
    storageBucket: "tourthelakes-1e165.firebasestorage.app",
    messagingSenderId: "470758171431",
    appId: "1:470758171431:web:f06dd39b0f15b63b2bff02",
    measurementId: "G-W6JY1LZXTP"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const toursEl = document.getElementById("tours");
  const tpl = document.getElementById("tourTemplate");

function clearTours() {
  toursEl.innerHTML = "";
}

function renderTours(toursObj) {
  clearTours();

  if (!toursObj) return;

  const entries = Object.entries(toursObj);

  for (const [tourId, tour] of entries) {
    if (!tour || tour.isLive !== true) continue;

    const node = tpl.content.cloneNode(true);
    const article = node.querySelector(".tour");
    article.dataset.tourId = tourId;

    node.querySelector(".tour-title").textContent = tour.title || tourId;
      
    const desc = node.querySelector(".tour-description");
desc.textContent = tour.description || "";
if (!tour.description) desc.style.display = "none";

    // imageUrl expected to be a Firebase Storage download URL
    const imageWrap = node.querySelector(".tour-image");
    if (tour.imageUrl) {
      const img = document.createElement("img");
      img.src = tour.imageUrl;
      img.alt = tour.title || "Tour image";
      imageWrap.appendChild(img);
    }

    // Leave these blank for now (listeners later)
    // .tour-price / .tour-nextdate / .tour-seats

    toursEl.appendChild(node);
  }
}

// Listen to /tours. If empty/null => nothing renders.
onValue(ref(db, "tours"), (snapshot) => {
  renderTours(snapshot.val());
});

// Toggle open/close (works for dynamically-rendered tours)
document.addEventListener("click", (e) => {
  const toggle = e.target.closest(".tour-toggle");
  if (!toggle) return;

  const tour = toggle.closest(".tour");
  const details = tour.querySelector(".tour-details");

  const isOpen = toggle.getAttribute("aria-expanded") === "true";
  toggle.setAttribute("aria-expanded", String(!isOpen));
  details.hidden = isOpen;
});
    
  void db;
</script>

</body>
</html>
